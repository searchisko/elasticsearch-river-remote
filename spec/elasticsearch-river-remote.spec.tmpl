%define  _deploy_dir /services/elasticsearch/plugins/river_remote

Name:           elasticsearch-river-remote
Version:        1.2.7
Release:        ${release}.el6
Summary:        Universal remote system indexing River Plugin for ElasticSearch

Group:          System Environment/Daemons
License:        Apache License, Version 2.0
URL:            https://github.com/searchisko/elasticsearch-river-remote


BuildRoot:      %{_tmppath}/%{name}-%{version}.%{release}-root-%(%{__id_u} -n)
BuildArch:      noarch

#set $i = 0
#for $artifact in $all_artifacts
  #if $artifact.startswith('elasticsearch-river-remote') and $artifact.endswith('.zip') and not $artifact.endswith('sources.zip')
Source0: $artifact
  #end if
#end for

Requires(post): chkconfig
Requires(preun): chkconfig
# This is for /sbin/service
Requires(preun): initscripts

%description
Universal remote system indexing River Plugin for ElasticSearch

%install
rm -rf %{buildroot}
/usr/bin/install -d %{buildroot}%{_deploy_dir}
unzip -d %{buildroot}%{_deploy_dir} %{SOURCE0}

%clean
rm -rf %{buildroot}

%files
%defattr(-,jboss,jboss,-)
%{_deploy_dir}


%changelog
* Mon Apr 28 2014 Lukas Vlcek <lvlcek at, redhat.com> 1.2.7
- Upgrade RPM release to version 1.2.7

* Fri Apr 4 2014 Lukas Vlcek <lvlcek at, redhat.com> 1.2.4
- Upgrade to version 1.2.4

* Thu Feb 27 2014 Lukas Vlcek <lvlcek at, redhat.com> 1.2.3
- Source 0 selection condition to ignore *sources.zip artifact

* Tue Feb 25 2014 Lukas Vlcek <lvlcek at, redhat.com> 1.2.3
- Initial RHEL6 rpm spec template
